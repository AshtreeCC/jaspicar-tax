<mat-toolbar id="header-toolbar" color="primary">
  <mat-toolbar-row fxLayoutAlign="space-between center">
    <span> JASPICAR Taxes </span>

    <a routerLink="/login" (click)="onLogout()" [hidden]="!(authService.isAuthenticated$ | async)"><small> Logout </small></a>
  </mat-toolbar-row>
</mat-toolbar>

<mat-sidenav-container id="sidenav">
  <mat-sidenav mode="side" opened class="-padding-20 -width-200">
      <mat-accordion *ngIf="(routeService.url$ | async) as url">
        <mat-expansion-panel [expanded]="url.page === 'tax'">
          <mat-expansion-panel-header color="accent"> 
            <mat-panel-title> Tax Year: </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <ng-container *ngFor="let yyyy of [2019, 2020, 2021]">
              <a mat-list-item routerLink="/tax/{{yyyy}}/{{url.view}}" [class.-active]="url.page == 'tax' && url.year == yyyy"> {{ yyyy }} </a>
            </ng-container>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel [expanded]="url.page === 'vat'">
          <mat-expansion-panel-header>
            <mat-panel-title> VAT: </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <ng-container *ngFor="let yyyy of [2019, 2020, 2021]">
              <a mat-list-item routerLink="/vat/{{yyyy}}" [class.-active]="url.page == 'vat' && url.year == yyyy"> {{ yyyy }} </a>
            </ng-container>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
  </mat-sidenav>
  <mat-sidenav-content>

    <router-outlet></router-outlet>

  </mat-sidenav-content>
</mat-sidenav-container>

<mat-toolbar id="footer-toolbar" color="primary">
  <mat-toolbar-row fxLayoutAlign="end center" fxLayoutGap="20px"> 
    <small> Version: {{updateService.version}} </small>
    <ng-container *ngIf="updateService.available$ | async">
      <button mat-raised-button (click)="onUpdate()"> Update Available <mat-icon class="-margin-left-10">error_outline</mat-icon></button>
    </ng-container>
  </mat-toolbar-row>
</mat-toolbar>
